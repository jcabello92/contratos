<h1>Representantes</h1>

<div style="display: flex; align-items: center; gap: 150px;">
  <div>
    <label for="opciones" style="margin-right: 10px;">Selecciona una opción:</label>
    <select id="opciones" name="opciones" class="combo-box">
      <option value="opcion1">Rut</option>
      <option value="opcion2">Nombre</option>
      <option value="opcion3">Apellido</option>
      <option value="opcion5">Teléfono</option>
      <option value="opcion6">Correo</option>
    </select>
  </div>

  <div>
    <label for="opciones2" style="margin-left: -10px;">Seleccione la siguiente opción:</label>
    <select id="opciones2" name="opciones" class="combo-box">
      <option value="opcion1">De Primero al Último</option>
      <option value="opcion2">De Último al Primero</option>
    </select>
  </div>
  <button class="combo-box">Buscar</button>
</div>

<div style="height: 30px"></div>

<div class="botonesCrud-container">
  <button class="botonesCrud" (click)="abrirModalRepresentantesCrear()">Crear Representante</button>
  <button class="botonesCrud" (click)="actualizarRepresentante()">Actualizar Representante</button>
  <button class="botonesCrud" (click)="eliminarRepresentante()">Eliminar Representante</button>
</div>


<div style="height: 20px"></div>


<table>
  <thead>
  <tr class="encabezado">
    <td>Selector</td>
    <td>ID</td>
    <td>RUT</td>
    <td>Nombre</td>
    <td>Apellido</td>
    <td>Teléfono</td>
    <td>Correo</td>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let representante of representantes; let i = index">
    <td class="px-4 py-2">
      <input
        type="checkbox"
        [checked]="representanteSeleccionado[i]"
        (change)="onCheckboxChange(i)"
      />
    </td>
    <td>{{ representante.id }}</td>
    <td>{{ representante.rut }}</td>
    <td>{{ representante.nombre }}</td>
    <td>{{ representante.apellido }}</td>
    <td>{{ representante.telefono }}</td>
    <td>{{ representante.correo }}</td>
  </tr>
  </tbody>
</table>


<div style="height: 50px"></div>

<div style="display: flex; justify-content: space-between; width: 100%;">
  <button class="buttons" style="flex: 1; margin-right: 10px;">Página Anterior</button>
  <button class="buttons" style="flex: 1;">Página Siguiente</button>
</div>



<!-- ==================================================== MODALES ======================================================-->

<!-- Modal crear-->
<div class="modal" *ngIf="modalAbiertoCrear">
  <div class="modal-content">
    <h2>Crear Representante</h2>

    <label>RUT:</label>
    <input type="text" [(ngModel)]="nuevoRepresentante.rut">

    <label>Nombre:</label>
    <input type="text" [(ngModel)]="nuevoRepresentante.nombre">

    <label>Apellido:</label>
    <input type="text" [(ngModel)]="nuevoRepresentante.apellido">

    <label>Teléfono:</label>
    <input type="text" [(ngModel)]="nuevoRepresentante.telefono">

    <label>Correo:</label>
    <input type="email" [(ngModel)]="nuevoRepresentante.correo">

    <div class="modal-buttons">
      <button class="boton-cancelar" (click)="cerrarModalRepresentantesCrear()">Cancelar</button>
      <button class="boton-crear" (click)="crearRepresentante()">Crear</button>
    </div>
  </div>
</div>


<!-- Modal Actualizar -->
<div *ngIf="showModalEditar" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white p-6 rounded shadow-lg w-1/3">
    <h2 class="text-xl font-bold mb-4">Actualizar Representante</h2>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">RUT</label>
      <input type="text" [(ngModel)]="representanteActual.rut" class="w-full px-3 py-2 border border-gray-300 rounded-md" name="rut" [ngModelOptions]="{standalone: true}" disabled/>
    </div>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Nombre</label>
      <input type="text" [(ngModel)]="representanteActual.nombre" class="w-full px-3 py-2 border border-gray-300 rounded-md" name="nombre" [ngModelOptions]="{standalone: true}" />
    </div>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Apellido</label>
      <input type="text" [(ngModel)]="representanteActual.apellido" class="w-full px-3 py-2 border border-gray-300 rounded-md" name="apellido" [ngModelOptions]="{standalone: true}" />
    </div>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Teléfono</label>
      <input type="text" [(ngModel)]="representanteActual.telefono" class="w-full px-3 py-2 border border-gray-300 rounded-md" name="telefono" [ngModelOptions]="{standalone: true}" />
    </div>

    <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700">Correo</label>
      <input type="email" [(ngModel)]="representanteActual.correo" class="w-full px-3 py-2 border border-gray-300 rounded-md" name="correo" [ngModelOptions]="{standalone: true}" />
    </div>

    <div class="flex justify-between mt-4">
      <button class="bg-blue-500 text-white py-2 px-4 rounded" (click)="actualizarElRepresentante()">Actualizar</button>
      <button class="bg-gray-500 text-white py-2 px-4 rounded" (click)="cancelarActualizacion()">Cancelar</button>
    </div>
  </div>
</div>


<!-- Modal de eliminación -->
<div *ngIf="modalAbiertoEliminar" class="modal">
  <div class="modal-content">
    <h3>¿Está seguro que desea eliminar a los representantes con los id: {{ idsParaEliminar }}?</h3>
    <button (click)="confirmarEliminacion()">Confirmar</button>
    <button (click)="cerrarModalEliminar()">Cancelar</button>
  </div>
</div>




