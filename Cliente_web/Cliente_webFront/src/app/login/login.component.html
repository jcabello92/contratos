<div class="login-container">

  <h1 class="main-title" style="font-size: 32px">Página de Contratos de la Municipalidad</h1>

  <h3 class="main-title" style="font-size: 24px">Inicio de Sesión</h3>

  <form (ngSubmit)="onLogin($event)">

    <!-- Imagen que se muestra en el front-->
    <div class="logo-container">
      <img
        src="https://municipalidaddecurico.cl/wp-content/uploads/2024/12/cropped-nl.jpeg"
        alt="Logo de la empresa"
        class="logo-image">
    </div>

    <!-- Campos de texto que debe ingresar el usuario-->
    <div class="form-group">
      <label class="main-title-small" for="user">Nombre de Usuario:</label>
      <input
        type="user"
        id="user"
        [(ngModel)]="user"
        name="user"
        placeholder="Ingrese su Nombre de Usuario"
        required>
    </div>

    <div class="form-group password-group">
      <label class="main-title-small" for="password">Contraseña:</label>
      <div class="password-container">
        <input
          type="{{ showPassword ? 'text' : 'password' }}"
          id="password"
          [(ngModel)]="password"
          name="password"
          placeholder="Ingrese su contraseña"
          required
        />
        <button type="button" class="toggle-password" (click)="togglePassword()">
          <img
            [src]="showPassword ? 'https://cdn-icons-png.flaticon.com/512/6684/6684701.png' : 'https://cdn-icons-png.flaticon.com/512/6405/6405909.png'"
            alt="Mostrar/Ocultar"
            class="eye-icon"
          />
        </button>
      </div>
    </div>

    <form (ngSubmit)="onLogin($event)">
      <!-- Campos del formulario -->
      <button type="submit" class="btn-login">Ingresar</button>
    </form>

    <!-- Apartados extra-->
    <div class="extra-links">
      <a href="javascript:void(0)" (click)="abrirPrimerModal()">¿Olvidaste tu contraseña?</a>
      <br>
    </div>
  </form>
</div>

<!-- =========================================================       MODALES       ======================================================================-->

<!-- Modal 1: ¿Quieres recuperar tu contraseña? -->
<div *ngIf="mostrarPrimerModal" class="modal-overlay">
  <div class="modal-content">
    <h2>¿Quieres recuperar tu contraseña?</h2>
    <label for="nombreUsuario">Ingresa tu nombre de usuario:</label>
    <input type="text" id="nombreUsuario" [(ngModel)]="usuarioIngresado" placeholder="Nombre de usuario">
    <div class="modal-actions">
      <button (click)="cerrarModales()">Cancelar</button>
      <button (click)="verificarUsuario()">Verificar</button>
    </div>
  </div>
</div>

<!-- Modal 2: Ingresa el código que te ha llegado al correo -->
<div *ngIf="mostrarSegundoModal" class="modal-overlay">
  <div class="modal-content">
    <h2>Ingresa el código que te ha llegado al correo</h2>
    <input type="text" id="codigoVerificacion" [(ngModel)]="codigoIngresado" placeholder="Código de verificación">
    <div class="modal-actions">
      <button (click)="cerrarModales()">Cancelar</button>
      <button (click)="verificarCodigo()">Verificar</button>
    </div>
  </div>
</div>


<!-- Modal 3: Ingrese su nueva contraseña -->
<div *ngIf="mostrarTercerModal" class="modal-overlay">
  <div class="modal-content">
    <h2>Ingrese su nueva contraseña</h2>
    <label for="nuevaContrasena">Nueva contraseña:</label>
    <input type="password" id="nuevaContrasena" [(ngModel)]="nuevaContrasena" placeholder="Nueva contraseña">

    <label for="confirmarContrasena">Confirmar nueva contraseña:</label>
    <input type="password" id="confirmarContrasena" [(ngModel)]="confirmarContrasena" placeholder="Confirmar contraseña">

    <div class="modal-actions">
      <button (click)="cerrarModales()">Cancelar</button>
      <button (click)="actualizarContrasena()">Actualizar contraseña</button>
    </div>
  </div>
</div>
